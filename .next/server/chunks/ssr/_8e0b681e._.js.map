{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/george/Dropbox/machine_learning/margaret-flower-app-main/components/ui/modal.tsx"],"sourcesContent":["// components/ui/modal.tsx\n'use client';\n\nimport { useEffect } from 'react';\n\nexport type ModalProps = {\n  open: boolean;\n  onClose: () => void;\n  title?: string;\n  /** Tailwind max-width utility, e.g. \"max-w-xl\" | \"max-w-2xl\" | \"max-w-3xl\" */\n  maxWidth?: string;\n  children: React.ReactNode;\n};\n\nexport function Modal({\n  open,\n  onClose,\n  title,\n  maxWidth = 'max-w-2xl', // smaller default so it fits most screens\n  children,\n}: ModalProps) {\n  // Close on ESC\n  useEffect(() => {\n    if (!open) return;\n    const onKey = (e: KeyboardEvent) => e.key === 'Escape' && onClose();\n    window.addEventListener('keydown', onKey);\n    return () => window.removeEventListener('keydown', onKey);\n  }, [open, onClose]);\n\n  // Prevent background scroll while open\n  useEffect(() => {\n    if (!open) return;\n    const { body } = document;\n    const prev = body.style.overflow;\n    body.style.overflow = 'hidden';\n    return () => {\n      body.style.overflow = prev;\n    };\n  }, [open]);\n\n  if (!open) return null;\n\n  return (\n    <div\n      role=\"dialog\"\n      aria-modal=\"true\"\n      className=\"fixed inset-0 z-[1000] flex items-center justify-center p-4\"\n    >\n      {/* Backdrop */}\n      <button\n        aria-label=\"Close\"\n        onClick={onClose}\n        className=\"absolute inset-0 bg-black/40\"\n      />\n\n      {/* Panel */}\n      <div\n        className={`relative z-[1001] w-full ${maxWidth} rounded-2xl bg-white shadow-2xl`}\n        style={{ maxHeight: '92vh' }} // hard cap so it always fits\n      >\n        {/* Sticky header with close */}\n        <div className=\"sticky top-0 z-[1] flex items-center justify-between border-b bg-white/95 px-4 py-3 backdrop-blur\">\n          <h2 className=\"text-lg font-semibold truncate\">{title}</h2>\n          <button\n            onClick={onClose}\n            className=\"rounded p-1 text-gray-600 hover:bg-gray-100\"\n            aria-label=\"Close modal\"\n          >\n            ✕\n          </button>\n        </div>\n\n        {/* Scrollable content */}\n        <div className=\"px-4 py-4 overflow-auto\" style={{ maxHeight: 'calc(92vh - 56px)' }}>\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"AAAA,0BAA0B;;;;;AAG1B;AAFA;;;AAaO,SAAS,MAAM,EACpB,IAAI,EACJ,OAAO,EACP,KAAK,EACL,WAAW,WAAW,EACtB,QAAQ,EACG;IACX,eAAe;IACf,CAAA,GAAA,oUAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,MAAM;QACX,MAAM,QAAQ,CAAC,IAAqB,EAAE,GAAG,KAAK,YAAY;QAC1D,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACrD,GAAG;QAAC;QAAM;KAAQ;IAElB,uCAAuC;IACvC,CAAA,GAAA,oUAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,MAAM;QACX,MAAM,EAAE,IAAI,EAAE,GAAG;QACjB,MAAM,OAAO,KAAK,KAAK,CAAC,QAAQ;QAChC,KAAK,KAAK,CAAC,QAAQ,GAAG;QACtB,OAAO;YACL,KAAK,KAAK,CAAC,QAAQ,GAAG;QACxB;IACF,GAAG;QAAC;KAAK;IAET,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,6WAAC;QACC,MAAK;QACL,cAAW;QACX,WAAU;;0BAGV,6WAAC;gBACC,cAAW;gBACX,SAAS;gBACT,WAAU;;;;;;0BAIZ,6WAAC;gBACC,WAAW,CAAC,yBAAyB,EAAE,SAAS,gCAAgC,CAAC;gBACjF,OAAO;oBAAE,WAAW;gBAAO;;kCAG3B,6WAAC;wBAAI,WAAU;;0CACb,6WAAC;gCAAG,WAAU;0CAAkC;;;;;;0CAChD,6WAAC;gCACC,SAAS;gCACT,WAAU;gCACV,cAAW;0CACZ;;;;;;;;;;;;kCAMH,6WAAC;wBAAI,WAAU;wBAA0B,OAAO;4BAAE,WAAW;wBAAoB;kCAC9E;;;;;;;;;;;;;;;;;;AAKX","debugId":null}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///Users/george/Dropbox/machine_learning/margaret-flower-app-main/components/flowers/flower-card.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport Image from 'next/image';\nimport { Modal } from '@/components/ui/modal';\nimport type { FlowerRow } from '@/lib/types';\n\ninterface Props {\n  flower: FlowerRow;\n  /** e.g. `${process.env.NEXT_PUBLIC_SUPABASE_URL}/storage/v1/object/public/flowers` */\n  imagesBase: string;\n  /** e.g. `${process.env.NEXT_PUBLIC_SUPABASE_URL}/storage/v1/object/public/icons` */\n  iconsBase?: string;\n}\n\ninterface LookupRow {\n  bloom_display?: string | null; bloom_icon?: string | null;\n  sun_display?: string | null;   sun_icon?: string | null;\n  moist_display?: string | null; moist_icon?: string | null;\n  cat_display?: string | null;   cat_icon?: string | null;\n  deer_display?: string | null;  deer_icon?: string | null;\n  wildlife_display?: string | null; wildlife_icon?: string | null;\n  soil_display?: string | null;  soil_icon?: string | null;\n  height_display?: string | null; height_icon?: string | null;\n  credit_display?: string | null;\n}\n\ninterface FlowerDetail extends Omit<FlowerRow, 'wildlife_comments' | 'design_function' | 'gardening_tips'> {\n  wildlife_comments?: string | null;\n  design_function?: string | null;\n  gardening_tips?: string | null;\n  lookups?: {\n    height?: LookupRow | null;\n    bloom?: LookupRow[];\n    sun?: LookupRow[];\n    moisture?: LookupRow[];\n    category?: LookupRow[];\n    deer?: LookupRow[];\n    wildlife?: LookupRow[];\n    soil?: LookupRow[];\n    credit?: LookupRow | null;\n  };\n}\n\nexport function FlowerCard({ flower, imagesBase, iconsBase }: Props) {\n  const [open, setOpen] = useState(false);\n  const [detail, setDetail] = useState<FlowerDetail | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [loadErr, setLoadErr] = useState<string | null>(null);\n\n  const imageUrl = flower.image_name ? `${imagesBase}/${encodeURIComponent(flower.image_name)}` : null;\n\n  // Fetch full detail lazily when opening\n  useEffect(() => {\n    if (!open) return;\n    let aborted = false;\n    (async () => {\n      try {\n        setLoading(true);\n        setLoadErr(null);\n        const res = await fetch(`/api/flowers/${flower.id}`, { cache: 'no-store' });\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\n        const data = (await res.json()) as FlowerDetail;\n        if (!aborted) setDetail(data);\n      } catch (e) {\n        if (!aborted) setLoadErr('Failed to load details.');\n        console.error('Flower detail fetch failed', e);\n      } finally {\n        if (!aborted) setLoading(false);\n      }\n    })();\n    return () => { aborted = true; };\n  }, [open, flower.id]);\n\n  const IconLabel = ({ icon, label }: { icon?: string | null; label?: string | null }) => {\n    if (!label) return null;\n    const url = icon && iconsBase ? `${iconsBase}/${encodeURIComponent(icon)}` : null;\n    return (\n      <div className=\"flex items-center gap-2\">\n        {url ? <Image src={url} alt={label} width={24} height={24} className=\"h-6 w-6\" /> : null}\n        <span className=\"text-sm\">{label}</span>\n      </div>\n    );\n  };\n\n  const Section = ({ title, children }: { title: string; children?: React.ReactNode }) => {\n    if (!children) return null;\n    return (\n      <section className=\"space-y-2\">\n        <h3 className=\"text-sm font-semibold\">{title}</h3>\n        {children}\n      </section>\n    );\n  };\n\n  return (\n    <>\n      {/* Grid Card */}\n      <button\n        onClick={() => setOpen(true)}\n        className=\"text-left rounded-xl border bg-white p-3 shadow-sm transition hover:shadow dark:bg-zinc-900\"\n        aria-label={`Open ${flower.common || flower.latin} details`}\n      >\n        {imageUrl ? (\n          <Image\n            src={imageUrl}\n            alt={flower.common || flower.latin}\n            width={300}\n            height={160}\n            className=\"h-40 w-full rounded-md object-cover\"\n            placeholder=\"blur\"\n            blurDataURL=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R+Ws5RV02D//9k=\"\n          />\n        ) : (\n          <div className=\"grid h-40 w-full place-items-center rounded-md bg-gray-100 text-sm text-gray-500\">\n            No image\n          </div>\n        )}\n        <h3 className=\"mt-2 font-semibold\">{flower.common || flower.latin}</h3>\n        {flower.common ? (\n          <p className=\"text-sm italic text-gray-600\">{flower.latin}</p>\n        ) : null}\n        <p className=\"mt-1 text-xs text-gray-500\">\n          ID: {flower.id}\n          {flower.height?.[0]?.height_display ? <> · {flower.height[0].height_display}</> : null}\n          {flower.categories?.[0]?.cat_display ? <> · {flower.categories[0].cat_display}</> : null}\n        </p>\n      </button>\n\n      {/* Modal (scroll-safe) */}\n      <Modal open={open} onClose={() => setOpen(false)} title={flower.common || flower.latin}>\n        {loading && <p className=\"text-sm text-gray-500\">Loading...</p>}\n        {loadErr && <p className=\"text-sm text-red-600\">{loadErr}</p>}\n\n        {!loading && !loadErr && (\n          <div className=\"space-y-5\">\n            {/* Image constrained to viewport height */}\n            {imageUrl ? (\n              <Image\n                src={imageUrl}\n                alt={flower.common || flower.latin}\n                width={600}\n                height={400}\n                className=\"w-full max-h-[45vh] rounded-md object-contain\"\n                placeholder=\"blur\"\n                blurDataURL=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R+Ws5RV02D//9k=\"\n              />\n            ) : null}\n\n            {/* Latin name under title */}\n            {flower.latin && flower.common ? (\n              <p className=\"text-sm italic text-gray-600\">{flower.latin}</p>\n            ) : null}\n\n            {/* Attributes with icons */}\n            <Section title=\"Attributes\">\n              <div className=\"grid gap-3 sm:grid-cols-2\">\n                {detail?.lookups?.height && (\n                  <IconLabel\n                    icon={detail.lookups.height.height_icon}\n                    label={detail.lookups.height.height_display}\n                  />\n                )}\n                {detail?.lookups?.bloom?.map((x, i) => (\n                  <IconLabel key={`b-${i}`} icon={x.bloom_icon} label={x.bloom_display} />\n                ))}\n                {detail?.lookups?.sun?.map((x, i) => (\n                  <IconLabel key={`s-${i}`} icon={x.sun_icon} label={x.sun_display} />\n                ))}\n                {detail?.lookups?.moisture?.map((x, i) => (\n                  <IconLabel key={`m-${i}`} icon={x.moist_icon} label={x.moist_display} />\n                ))}\n                {detail?.lookups?.category?.map((x, i) => (\n                  <IconLabel key={`c-${i}`} icon={x.cat_icon} label={x.cat_display} />\n                ))}\n                {detail?.lookups?.deer?.map((x, i) => (\n                  <IconLabel key={`d-${i}`} icon={x.deer_icon} label={x.deer_display} />\n                ))}\n                {detail?.lookups?.soil?.map((x, i) => (\n                  <IconLabel key={`so-${i}`} icon={x.soil_icon} label={x.soil_display} />\n                ))}\n              </div>\n            </Section>\n\n            {/* Wildlife */}\n            {Array.isArray(detail?.lookups?.wildlife) && detail.lookups!.wildlife.length > 0 && (\n              <Section title=\"Wildlife\">\n                <div className=\"flex flex-wrap gap-3\">\n                  {detail.lookups!.wildlife.map((w, i) => (\n                    <IconLabel key={`w-${i}`} icon={w.wildlife_icon} label={w.wildlife_display} />\n                  ))}\n                </div>\n              </Section>\n            )}\n\n            {/* Long-form sections */}\n            {detail?.wildlife_comments && (\n              <Section title=\"Wildlife Notes\">\n                <p className=\"text-sm leading-relaxed\">{detail.wildlife_comments}</p>\n              </Section>\n            )}\n            {detail?.design_function && (\n              <Section title=\"Design Function\">\n                <p className=\"text-sm leading-relaxed\">{detail.design_function}</p>\n              </Section>\n            )}\n            {detail?.gardening_tips && (\n              <Section title=\"Gardening Tips\">\n                <p className=\"text-sm leading-relaxed\">{detail.gardening_tips}</p>\n              </Section>\n            )}\n\n            {/* Region / pH */}\n            {(detail?.region || detail?.ph) && (\n              <Section title=\"Region & Soil pH\">\n                <div className=\"grid gap-2 sm:grid-cols-2 text-sm\">\n                  {detail?.region && <p><span className=\"font-medium\">Region:</span> {detail.region}</p>}\n                  {detail?.ph && <p><span className=\"font-medium\">pH:</span> {detail.ph}</p>}\n                </div>\n              </Section>\n            )}\n\n            {/* Photo credit */}\n            {detail?.lookups?.credit && (\n              <p className=\"text-xs text-gray-500\">\n                Photo credit: {detail.lookups.credit?.credit_display ?? ''}\n              </p>\n            )}\n          </div>\n        )}\n      </Modal>\n    </>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 550, "column": 0}, "map": {"version":3,"sources":["file:///Users/george/Dropbox/machine_learning/margaret-flower-app-main/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,yNAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,sLAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 564, "column": 0}, "map": {"version":3,"sources":["file:///Users/george/Dropbox/machine_learning/margaret-flower-app-main/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,2OAAA,CAAA,MAAG,AAAD,EACvB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,oSAAA,CAAA,OAAI,GAAG;IAE9B,qBACE,6WAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 619, "column": 0}, "map": {"version":3,"sources":["file:///Users/george/Dropbox/machine_learning/margaret-flower-app-main/components/search/advanced-search-panel.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { Button } from '@/components/ui/button';\n\ninterface LookupOption {\n  code: number;\n  display: string;\n}\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function AdvancedSearchPanel({ isOpen, onClose }: Props) {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  \n  // Filter state\n  const [filters, setFilters] = useState({\n    cat_code: 0,\n    height_code: 0,\n    bloom_code: 0,\n    moist_code: 0,\n    sun_code: 0,\n    wild_code: 0,\n    soil_code: 0,\n    deer_code: 0,\n  });\n\n  // Lookup options\n  const [lookupOptions, setLookupOptions] = useState<{\n    categories: LookupOption[];\n    height: LookupOption[];\n    bloom: LookupOption[];\n    moisture: LookupOption[];\n    sun: LookupOption[];\n    wildlife: LookupOption[];\n    soil: LookupOption[];\n    deer: LookupOption[];\n  }>({\n    categories: [],\n    height: [],\n    bloom: [],\n    moisture: [],\n    sun: [],\n    wildlife: [],\n    soil: [],\n    deer: [],\n  });\n\n  // Load lookup options on mount\n  useEffect(() => {\n    loadLookupOptions();\n  }, []);\n\n  // Initialize filters from URL params\n  useEffect(() => {\n    const params = Object.fromEntries(searchParams.entries());\n    setFilters({\n      cat_code: parseInt(params.cat_code || '0'),\n      height_code: parseInt(params.height_code || '0'),\n      bloom_code: parseInt(params.bloom_code || '0'),\n      moist_code: parseInt(params.moist_code || '0'),\n      sun_code: parseInt(params.sun_code || '0'),\n      wild_code: parseInt(params.wild_code || '0'),\n      soil_code: parseInt(params.soil_code || '0'),\n      deer_code: parseInt(params.deer_code || '0'),\n    });\n  }, [searchParams]);\n\n  const loadLookupOptions = async () => {\n    try {\n      const response = await fetch('/api/lookup-options');\n      if (response.ok) {\n        const options = await response.json();\n        setLookupOptions(options);\n      }\n    } catch (error) {\n      console.error('Failed to load lookup options:', error);\n    }\n  };\n\n  const handleFilterChange = (filterKey: keyof typeof filters, value: string) => {\n    setFilters(prev => ({\n      ...prev,\n      [filterKey]: parseInt(value) || 0,\n    }));\n  };\n\n  const handleSearch = () => {\n    const params = new URLSearchParams();\n    \n    // Keep existing text search\n    const q = searchParams.get('q');\n    if (q) params.set('q', q);\n    \n    // Add filter params\n    Object.entries(filters).forEach(([key, value]) => {\n      if (value > 0) {\n        params.set(key, value.toString());\n      }\n    });\n\n    router.push(`/?${params.toString()}`);\n    onClose();\n  };\n\n  const handleReset = () => {\n    setFilters({\n      cat_code: 0,\n      height_code: 0,\n      bloom_code: 0,\n      moist_code: 0,\n      sun_code: 0,\n      wild_code: 0,\n      soil_code: 0,\n      deer_code: 0,\n    });\n    \n    // Keep only text search\n    const q = searchParams.get('q');\n    router.push(q ? `/?q=${encodeURIComponent(q)}` : '/');\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <>\n      {/* Overlay */}\n      <div \n        className=\"fixed inset-0 bg-black/50 z-40\" \n        onClick={onClose}\n      />\n      \n      {/* Panel */}\n      <div className=\"fixed left-0 top-0 h-full w-80 bg-blue-700 text-white z-50 overflow-y-auto\">\n        <div className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-xl font-bold\">Select Characteristics</h2>\n            <button\n              onClick={onClose}\n              className=\"text-white hover:text-gray-300\"\n              aria-label=\"Close\"\n            >\n              <svg className=\"h-6 w-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n\n          <div className=\"space-y-4\">\n            {/* Category */}\n            <div>\n              <select\n                value={filters.cat_code}\n                onChange={(e) => handleFilterChange('cat_code', e.target.value)}\n                className=\"w-full p-2 rounded bg-white text-black\"\n                title=\"Select a plant type\"\n              >\n                <option value=\"0\" disabled>Category</option>\n                {lookupOptions.categories.map(option => (\n                  <option key={option.code} value={option.code}>\n                    {option.display}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Height */}\n            <div>\n              <select\n                value={filters.height_code}\n                onChange={(e) => handleFilterChange('height_code', e.target.value)}\n                className=\"w-full p-2 rounded bg-white text-black\"\n                title=\"Select a specific height range\"\n              >\n                <option value=\"0\" disabled>Height</option>\n                {lookupOptions.height.map(option => (\n                  <option key={option.code} value={option.code}>\n                    {option.display}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Bloom Time */}\n            <div>\n              <select\n                value={filters.bloom_code}\n                onChange={(e) => handleFilterChange('bloom_code', e.target.value)}\n                className=\"w-full p-2 rounded bg-white text-black\"\n                title=\"Select a blooming season\"\n              >\n                <option value=\"0\" disabled>Bloom time</option>\n                {lookupOptions.bloom.map(option => (\n                  <option key={option.code} value={option.code}>\n                    {option.display}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Moisture */}\n            <div>\n              <select\n                value={filters.moist_code}\n                onChange={(e) => handleFilterChange('moist_code', e.target.value)}\n                className=\"w-full p-2 rounded bg-white text-black\"\n                title=\"Select a specific moisture requirement\"\n              >\n                <option value=\"0\" disabled>Moisture</option>\n                {lookupOptions.moisture.map(option => (\n                  <option key={option.code} value={option.code}>\n                    {option.display}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Sun */}\n            <div>\n              <select\n                value={filters.sun_code}\n                onChange={(e) => handleFilterChange('sun_code', e.target.value)}\n                className=\"w-full p-2 rounded bg-white text-black\"\n                title=\"Select an amount of sunshine available\"\n              >\n                <option value=\"0\" disabled>Level of Sunshine</option>\n                {lookupOptions.sun.map(option => (\n                  <option key={option.code} value={option.code}>\n                    {option.display}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Wildlife */}\n            <div>\n              <select\n                value={filters.wild_code}\n                onChange={(e) => handleFilterChange('wild_code', e.target.value)}\n                className=\"w-full p-2 rounded bg-white text-black\"\n                title=\"Select wildlife\"\n              >\n                <option value=\"0\" disabled>Wildlife</option>\n                {lookupOptions.wildlife.map(option => (\n                  <option key={option.code} value={option.code}>\n                    {option.display}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Soil Type */}\n            <div>\n              <select\n                value={filters.soil_code}\n                onChange={(e) => handleFilterChange('soil_code', e.target.value)}\n                className=\"w-full p-2 rounded bg-white text-black\"\n                title=\"Select soil type\"\n              >\n                <option value=\"0\" disabled>Soil Type</option>\n                {lookupOptions.soil.map(option => (\n                  <option key={option.code} value={option.code}>\n                    {option.display}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Deer Resistance */}\n            <div>\n              <select\n                value={filters.deer_code}\n                onChange={(e) => handleFilterChange('deer_code', e.target.value)}\n                className=\"w-full p-2 rounded bg-white text-black\"\n                title=\"Select deer resistance\"\n              >\n                <option value=\"0\" disabled>Deer Resistance</option>\n                {lookupOptions.deer.map(option => (\n                  <option key={option.code} value={option.code}>\n                    {option.display}\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"mt-8 space-y-4\">\n            <Button\n              onClick={handleSearch}\n              className=\"w-full bg-green-600 hover:bg-green-700 text-white\"\n            >\n              Search\n            </Button>\n            \n            <Button\n              onClick={handleReset}\n              className=\"w-full bg-red-600 hover:bg-red-700 text-white\"\n            >\n              Reset\n            </Button>\n          </div>\n\n          <div className=\"mt-6 text-sm\">\n            <p>Click <span className=\"bg-white text-green-600 px-2 py-1 rounded font-semibold\">Search</span> to apply filters.</p>\n            <p className=\"mt-2\">Click <span className=\"bg-white text-red-600 px-2 py-1 rounded font-semibold\">Reset</span> between searches.</p>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1165, "column": 0}, "map": {"version":3,"sources":["file:///Users/george/Dropbox/machine_learning/margaret-flower-app-main/components/search/main-page-with-search.tsx"],"sourcesContent":["'use client';\n\nimport { useState, Suspense } from 'react';\nimport { AdvancedSearchPanel } from './advanced-search-panel';\nimport Link from 'next/link';\nimport { useSearchParams } from 'next/navigation';\n\ninterface Props {\n  children: React.ReactNode;\n  searchQuery?: string;\n}\n\nexport function MainPageWithSearch({ children, searchQuery = '' }: Props) {\n  const [isSearchPanelOpen, setIsSearchPanelOpen] = useState(false);\n\n  return (\n    <>\n      <main className=\"mx-auto max-w-6xl p-6\">\n        <Header onOpenSearch={() => setIsSearchPanelOpen(true)} />\n        <SearchBar defaultValue={searchQuery} />\n        <Suspense fallback={null}>\n          <ActiveFilters />\n        </Suspense>\n        {children}\n      </main>\n\n      <Suspense fallback={null}>\n        <AdvancedSearchPanel\n          isOpen={isSearchPanelOpen}\n          onClose={() => setIsSearchPanelOpen(false)}\n        />\n      </Suspense>\n    </>\n  );\n}\n\nfunction Header({ onOpenSearch }: { onOpenSearch: () => void }) {\n  return (\n    <div className=\"flex items-center justify-between mb-4\">\n      <h1 className=\"text-2xl font-bold\">NOVA Native Plants</h1>\n      <div className=\"flex items-center gap-3\">\n        <button\n          onClick={onOpenSearch}\n          className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n          title=\"Search By Category\"\n        >\n          <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n          </svg>\n          <span className=\"hidden sm:inline\">Advanced Search</span>\n        </button>\n        <Link\n          href=\"/admin\"\n          className=\"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\n          title=\"Admin Panel\"\n        >\n          <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n          </svg>\n          <span className=\"hidden sm:inline\">Admin</span>\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nfunction SearchBar({ defaultValue = '' }: { defaultValue?: string }) {\n  return (\n    <form action=\"/\" className=\"w-full\">\n      <div className=\"relative max-w-xl\">\n        <input\n          name=\"q\"\n          defaultValue={defaultValue}\n          placeholder=\"Search plants by name, region, function, growing tips, wildlife info, pH…\"\n          aria-label=\"Search flowers\"\n          className=\"w-full rounded-xl border px-4 py-2 pr-10 outline-none focus:ring\"\n        />\n        {defaultValue && (\n          <Link\n            href=\"/\"\n            className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n            aria-label=\"Clear search\"\n          >\n            <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </Link>\n        )}\n      </div>\n    </form>\n  );\n}\n\nfunction ActiveFilters() {\n  const searchParams = useSearchParams();\n  \n  // Check if any filter parameters are present\n  const hasFilters = ['cat_code', 'height_code', 'bloom_code', 'moist_code', 'sun_code', 'wild_code', 'soil_code', 'deer_code'].some(\n    param => searchParams.get(param)\n  );\n\n  const hasTextSearch = searchParams.get('q');\n  \n  if (!hasFilters && !hasTextSearch) return null;\n\n  return (\n    <div className=\"mb-4 flex items-center gap-4\">\n      {(hasFilters || hasTextSearch) && (\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-sm text-gray-600\">\n            {hasFilters && hasTextSearch ? 'Filtered search results' : \n             hasFilters ? 'Filtered results' : \n             'Search results'}\n          </span>\n          <Link\n            href=\"/\"\n            className=\"inline-flex items-center gap-1 rounded-lg bg-blue-100 px-3 py-1 text-sm text-blue-700 hover:bg-blue-200 transition-colors\"\n          >\n            <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n            Show All Plants\n          </Link>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}